\hypertarget{group__shorthand_notation}{}\doxysection{Shorthand Notation}
\label{group__shorthand_notation}\index{Shorthand Notation@{Shorthand Notation}}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{group__shorthand_notation_ga75cc713660bd3bfdae9ed36001c31591}\label{group__shorthand_notation_ga75cc713660bd3bfdae9ed36001c31591}} 
\mbox{\hyperlink{group__shorthand_notation_ga75cc713660bd3bfdae9ed36001c31591}{microsoft\+::quantum\+::notation\+::\+Capture\+::\+Capture}} (std\+::string const \&name)
\begin{DoxyCompactList}\small\item\em Explicit creation using string name constructor. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{group__shorthand_notation_ga067f53b718d424ca59ec3b70a6b5c9b1}\label{group__shorthand_notation_ga067f53b718d424ca59ec3b70a6b5c9b1}} 
IOperand\+Prototype\+Ptr {\bfseries microsoft\+::quantum\+::notation\+::\+Capture\+::operator=} (IOperand\+Prototype\+Ptr const \&other)
\item 
{\footnotesize template$<$typename... Args$>$ }\\IOperand\+Prototype\+Ptr \mbox{\hyperlink{group__shorthand_notation_gabb463c16465034b9d9b85290edd9a4bc}{microsoft\+::quantum\+::notation\+::call}} (std\+::string const \&name, Args... args)
\item 
\mbox{\Hypertarget{group__shorthand_notation_gad1881ef24c25dfceb3ad71f18aa2c43f}\label{group__shorthand_notation_gad1881ef24c25dfceb3ad71f18aa2c43f}} 
IOperand\+Prototype\+Ptr \mbox{\hyperlink{group__shorthand_notation_gad1881ef24c25dfceb3ad71f18aa2c43f}{microsoft\+::quantum\+::notation\+::unnamed\+Invoke}} ()
\begin{DoxyCompactList}\small\item\em Matches a invoke instruction. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{group__shorthand_notation_gad70623d62fe54e6077fd102a33a93e5b}\label{group__shorthand_notation_gad70623d62fe54e6077fd102a33a93e5b}} 
{\footnotesize template$<$typename... Args$>$ }\\IOperand\+Prototype\+Ptr \mbox{\hyperlink{group__shorthand_notation_gad70623d62fe54e6077fd102a33a93e5b}{microsoft\+::quantum\+::notation\+::phi}} (Args... args)
\begin{DoxyCompactList}\small\item\em Matches a phi node with N arguments. \end{DoxyCompactList}\item 
IOperand\+Prototype\+Ptr \mbox{\hyperlink{group__shorthand_notation_ga766351375d479dbb164ee827ee330219}{microsoft\+::quantum\+::notation\+::call\+By\+Name\+Only}} (std\+::string const \&name)
\item 
\mbox{\Hypertarget{group__shorthand_notation_gad649d125a7dfa6d4fd594400b1638683}\label{group__shorthand_notation_gad649d125a7dfa6d4fd594400b1638683}} 
IOperand\+Prototype\+Ptr \mbox{\hyperlink{group__shorthand_notation_gad649d125a7dfa6d4fd594400b1638683}{microsoft\+::quantum\+::notation\+::bit\+Cast}} (IOperand\+Prototype\+Ptr const  \&arg)
\begin{DoxyCompactList}\small\item\em Matches the llvm\+::\+Bit\+Cast instructruction. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{group__shorthand_notation_gacdb76f23b9282dead50b4b5bf6c6ab64}\label{group__shorthand_notation_gacdb76f23b9282dead50b4b5bf6c6ab64}} 
IOperand\+Prototype\+Ptr \mbox{\hyperlink{group__shorthand_notation_gacdb76f23b9282dead50b4b5bf6c6ab64}{microsoft\+::quantum\+::notation\+::int\+To\+Ptr}} (IOperand\+Prototype\+Ptr const  \&arg)
\begin{DoxyCompactList}\small\item\em Matches the llvm\+::\+Int\+To\+Ptr instructruction. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{group__shorthand_notation_gaea3374cd06fe2f3b4d9bff4ad23a4af4}\label{group__shorthand_notation_gaea3374cd06fe2f3b4d9bff4ad23a4af4}} 
IOperand\+Prototype\+Ptr \mbox{\hyperlink{group__shorthand_notation_gaea3374cd06fe2f3b4d9bff4ad23a4af4}{microsoft\+::quantum\+::notation\+::const\+Int}} ()
\begin{DoxyCompactList}\small\item\em Matches the llvm\+::\+Constant\+Int instructruction. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{group__shorthand_notation_gad06c9d1eace6451c6cb6a80150b87576}\label{group__shorthand_notation_gad06c9d1eace6451c6cb6a80150b87576}} 
IOperand\+Prototype\+Ptr \mbox{\hyperlink{group__shorthand_notation_gad06c9d1eace6451c6cb6a80150b87576}{microsoft\+::quantum\+::notation\+::branch}} (IOperand\+Prototype\+Ptr const  \&cond, IOperand\+Prototype\+Ptr const  \&arg1, IOperand\+Prototype\+Ptr const  \&arg2)
\begin{DoxyCompactList}\small\item\em Matches a branch instruction given a condition and two arguments. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{group__shorthand_notation_gaa8a0123f4724cb44f2484e7d8e38d086}\label{group__shorthand_notation_gaa8a0123f4724cb44f2484e7d8e38d086}} 
IOperand\+Prototype\+Ptr {\bfseries microsoft\+::quantum\+::notation\+::switch\+Op} (IOperand\+Prototype\+Ptr const \&cond, IOperand\+Prototype\+Ptr const \&arg1, IOperand\+Prototype\+Ptr const \&arg2)
\item 
\mbox{\Hypertarget{group__shorthand_notation_ga2b184fe960d85fd09167f16c833907b3}\label{group__shorthand_notation_ga2b184fe960d85fd09167f16c833907b3}} 
IOperand\+Prototype\+Ptr \mbox{\hyperlink{group__shorthand_notation_ga2b184fe960d85fd09167f16c833907b3}{microsoft\+::quantum\+::notation\+::select}} (IOperand\+Prototype\+Ptr const \&cond, IOperand\+Prototype\+Ptr const \&arg1, IOperand\+Prototype\+Ptr const \&arg2)
\begin{DoxyCompactList}\small\item\em Matches a select instruction given a condition and two arguments. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{group__shorthand_notation_ga44ddd41276fac20964ede0e3b3a2c864}\label{group__shorthand_notation_ga44ddd41276fac20964ede0e3b3a2c864}} 
IOperand\+Prototype\+Ptr \mbox{\hyperlink{group__shorthand_notation_ga44ddd41276fac20964ede0e3b3a2c864}{microsoft\+::quantum\+::notation\+::load}} (IOperand\+Prototype\+Ptr const  \&arg)
\begin{DoxyCompactList}\small\item\em Matches a load instruction with one argument. \end{DoxyCompactList}\item 
IOperand\+Prototype\+Ptr \mbox{\hyperlink{group__shorthand_notation_ga2fb129cfb7135e02513ac0eea14b94bc}{microsoft\+::quantum\+::notation\+::store}} (IOperand\+Prototype\+Ptr const \&target, IOperand\+Prototype\+Ptr const \&value)
\item 
\mbox{\Hypertarget{group__shorthand_notation_ga1df4795986302aa16342db829b457071}\label{group__shorthand_notation_ga1df4795986302aa16342db829b457071}} 
IOperand\+Prototype\+Ptr \mbox{\hyperlink{group__shorthand_notation_ga1df4795986302aa16342db829b457071}{microsoft\+::quantum\+::notation\+::basic\+Block}} ()
\begin{DoxyCompactList}\small\item\em Matches a load instruction with one argument. \end{DoxyCompactList}\item 
Replacer\+Function \mbox{\hyperlink{group__shorthand_notation_gae89b441f450b5df53717bbf6f5c134c4}{microsoft\+::quantum\+::notation\+::delete\+Instruction}} ()
\item 
\mbox{\hyperlink{classmicrosoft_1_1quantum_1_1notation_1_1_capture}{Capture}} \mbox{\hyperlink{group__shorthand_notation_ga566037f3a56a77f63868af1ed5743731}{microsoft\+::quantum\+::notation\+::operator\char`\"{}\char`\"{}\+\_\+cap}} (char const $\ast$name, std\+::size\+\_\+t)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Shorthand notations are made to make it possible to match patterns in the QIR. This part of the library focuses on making it easy to express advance patterns in just a few lines and specify what parts of the IR is of interest to the replacer function. An example is following pattern


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{auto} get\_one = \mbox{\hyperlink{group__shorthand_notation_gabb463c16465034b9d9b85290edd9a4bc}{call}}(\textcolor{stringliteral}{"{}\_\_quantum\_\_rt\_\_result\_get\_one"{}});}
\DoxyCodeLine{addRule(}
\DoxyCodeLine{    \{\mbox{\hyperlink{group__shorthand_notation_gad06c9d1eace6451c6cb6a80150b87576}{branch}}(\textcolor{stringliteral}{"{}cond"{}}\_cap = \mbox{\hyperlink{group__shorthand_notation_gabb463c16465034b9d9b85290edd9a4bc}{call}}(\textcolor{stringliteral}{"{}\_\_quantum\_\_rt\_\_result\_equal"{}}, \textcolor{stringliteral}{"{}result"{}}\_cap = \_, \textcolor{stringliteral}{"{}one"{}}\_cap =}
\DoxyCodeLine{    get\_one), \_, \_),}
\DoxyCodeLine{     replace\_branch\_positive\});}

\end{DoxyCode}


which matches IRs of the form


\begin{DoxyCode}{0}
\DoxyCodeLine{\%1 = \mbox{\hyperlink{group__shorthand_notation_gabb463c16465034b9d9b85290edd9a4bc}{call}} \%Result* @\_\_quantum\_\_rt\_\_result\_get\_one()}
\DoxyCodeLine{\%2 = \mbox{\hyperlink{group__shorthand_notation_gabb463c16465034b9d9b85290edd9a4bc}{call}} i1 @\_\_quantum\_\_rt\_\_result\_equal(\%Result* \%0, \%Result* \%1)}
\DoxyCodeLine{br i1 \%2, label \%then0\_\_1, label \%continue\_\_1}

\end{DoxyCode}


The pattern futher specifies that as a successful match is obtained, a table capturing certain values must be created. In the above example, the table would contain three entries\+: {\ttfamily cond}, {\ttfamily result} and {\ttfamily one} each of which would point to a a llvm\+::\+Value$\ast$ in the QIR. This allows the replacement function to easily manipulate the DAG in these three places (four if you include the main captured value which is always passed to the replacement function).

The module further has shorthand notation for often encountered patterns such as any operand.

The module also implements shorthand notation for common replacers.

Literals which ease the burned of capturing values and increase readibility of the code. 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{group__shorthand_notation_gabb463c16465034b9d9b85290edd9a4bc}\label{group__shorthand_notation_gabb463c16465034b9d9b85290edd9a4bc}} 
\index{Shorthand Notation@{Shorthand Notation}!call@{call}}
\index{call@{call}!Shorthand Notation@{Shorthand Notation}}
\doxysubsubsection{\texorpdfstring{call()}{call()}}
{\footnotesize\ttfamily template$<$typename... Args$>$ \\
IOperand\+Prototype\+Ptr microsoft\+::quantum\+::notation\+::call (\begin{DoxyParamCaption}\item[{std\+::string const \&}]{name,  }\item[{Args...}]{args }\end{DoxyParamCaption})}

Shorthand notations are made to make it possible to match patterns in the QIR. This part of the library focuses on making it easy to express advance patterns in just a few lines and specify what parts of the IR is of interest to the replacer function. An example is following pattern


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{auto} get\_one = \mbox{\hyperlink{group__shorthand_notation_gabb463c16465034b9d9b85290edd9a4bc}{call}}(\textcolor{stringliteral}{"{}\_\_quantum\_\_rt\_\_result\_get\_one"{}});}
\DoxyCodeLine{addRule(}
\DoxyCodeLine{    \{\mbox{\hyperlink{group__shorthand_notation_gad06c9d1eace6451c6cb6a80150b87576}{branch}}(\textcolor{stringliteral}{"{}cond"{}}\_cap = \mbox{\hyperlink{group__shorthand_notation_gabb463c16465034b9d9b85290edd9a4bc}{call}}(\textcolor{stringliteral}{"{}\_\_quantum\_\_rt\_\_result\_equal"{}}, \textcolor{stringliteral}{"{}result"{}}\_cap = \_, \textcolor{stringliteral}{"{}one"{}}\_cap =}
\DoxyCodeLine{    get\_one), \_, \_),}
\DoxyCodeLine{     replace\_branch\_positive\});}

\end{DoxyCode}


which matches IRs of the form


\begin{DoxyCode}{0}
\DoxyCodeLine{\%1 = \mbox{\hyperlink{group__shorthand_notation_gabb463c16465034b9d9b85290edd9a4bc}{call}} \%Result* @\_\_quantum\_\_rt\_\_result\_get\_one()}
\DoxyCodeLine{\%2 = \mbox{\hyperlink{group__shorthand_notation_gabb463c16465034b9d9b85290edd9a4bc}{call}} i1 @\_\_quantum\_\_rt\_\_result\_equal(\%Result* \%0, \%Result* \%1)}
\DoxyCodeLine{br i1 \%2, label \%then0\_\_1, label \%continue\_\_1}

\end{DoxyCode}


The pattern futher specifies that as a successful match is obtained, a table capturing certain values must be created. In the above example, the table would contain three entries\+: {\ttfamily cond}, {\ttfamily result} and {\ttfamily one} each of which would point to a a llvm\+::\+Value$\ast$ in the QIR. This allows the replacement function to easily manipulate the DAG in these three places (four if you include the main captured value which is always passed to the replacement function). Shorthand notation to match an instruction for a function call. The resulting \mbox{\hyperlink{classmicrosoft_1_1quantum_1_1_i_operand_prototype}{IOperand\+Prototype}} matches a function call with arguments as specified by the arguments given. For instance,


\begin{DoxyCode}{0}
\DoxyCodeLine{addRule(\{\mbox{\hyperlink{group__shorthand_notation_gabb463c16465034b9d9b85290edd9a4bc}{call}}(\textcolor{stringliteral}{"{}foo"{}}, \_, \_), \mbox{\hyperlink{group__shorthand_notation_gae89b441f450b5df53717bbf6f5c134c4}{deleteInstruction}}()\});}

\end{DoxyCode}


matches a call to the function {\ttfamily foo} with exactly two arguments.

Shorthand notation to match an instruction for a function call. The resulting \mbox{\hyperlink{classmicrosoft_1_1quantum_1_1_i_operand_prototype}{IOperand\+Prototype}} matches a function call with arguments as specified by the arguments given. For instance,


\begin{DoxyCode}{0}
\DoxyCodeLine{addRule(\{\mbox{\hyperlink{group__shorthand_notation_gabb463c16465034b9d9b85290edd9a4bc}{call}}(\textcolor{stringliteral}{"{}foo"{}}, \_, \_), \mbox{\hyperlink{group__shorthand_notation_gae89b441f450b5df53717bbf6f5c134c4}{deleteInstruction}}()\});}

\end{DoxyCode}


matches a call to the function {\ttfamily foo} with exactly two arguments. \mbox{\Hypertarget{group__shorthand_notation_ga766351375d479dbb164ee827ee330219}\label{group__shorthand_notation_ga766351375d479dbb164ee827ee330219}} 
\index{Shorthand Notation@{Shorthand Notation}!callByNameOnly@{callByNameOnly}}
\index{callByNameOnly@{callByNameOnly}!Shorthand Notation@{Shorthand Notation}}
\doxysubsubsection{\texorpdfstring{callByNameOnly()}{callByNameOnly()}}
{\footnotesize\ttfamily IOperand\+Prototype\+Ptr microsoft\+::quantum\+::notation\+::call\+By\+Name\+Only (\begin{DoxyParamCaption}\item[{std\+::string const \&}]{name }\end{DoxyParamCaption})}

Shorthand notation to match an instruction with a specified name. Unlike call, this pattern matches by name only and ignore the arguments.


\begin{DoxyCode}{0}
\DoxyCodeLine{addRule(\{\mbox{\hyperlink{group__shorthand_notation_ga766351375d479dbb164ee827ee330219}{callByNameOnly}}(\textcolor{stringliteral}{"{}foo"{}}), \mbox{\hyperlink{group__shorthand_notation_gae89b441f450b5df53717bbf6f5c134c4}{deleteInstruction}}()\});}

\end{DoxyCode}


matches calls to the function {\ttfamily foo} regardless of the number of arguments. \mbox{\Hypertarget{group__shorthand_notation_gae89b441f450b5df53717bbf6f5c134c4}\label{group__shorthand_notation_gae89b441f450b5df53717bbf6f5c134c4}} 
\index{Shorthand Notation@{Shorthand Notation}!deleteInstruction@{deleteInstruction}}
\index{deleteInstruction@{deleteInstruction}!Shorthand Notation@{Shorthand Notation}}
\doxysubsubsection{\texorpdfstring{deleteInstruction()}{deleteInstruction()}}
{\footnotesize\ttfamily Replacer\+Function microsoft\+::quantum\+::notation\+::delete\+Instruction (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Shorthand notation to delete an instruction. If passed as the replacement function, this function generates a replacer that deletes the instruction. This is a shorthand notation for deleting an instruction that can be used with a custom rule when building a ruleset. This function can be used with shorthand notation for patterns as follows\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{addRule(\{\mbox{\hyperlink{group__shorthand_notation_ga766351375d479dbb164ee827ee330219}{callByNameOnly}}(name), \mbox{\hyperlink{group__shorthand_notation_gae89b441f450b5df53717bbf6f5c134c4}{deleteInstruction}}()\});}

\end{DoxyCode}
 to delete the instructions that calls functions with the name {\ttfamily name}. \mbox{\Hypertarget{group__shorthand_notation_ga566037f3a56a77f63868af1ed5743731}\label{group__shorthand_notation_ga566037f3a56a77f63868af1ed5743731}} 
\index{Shorthand Notation@{Shorthand Notation}!operator\char`\"{}\char`\"{}\_cap@{operator""""\_cap}}
\index{operator\char`\"{}\char`\"{}\_cap@{operator""""\_cap}!Shorthand Notation@{Shorthand Notation}}
\doxysubsubsection{\texorpdfstring{operator""""\_cap()}{operator""\_cap()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classmicrosoft_1_1quantum_1_1notation_1_1_capture}{Capture}} microsoft\+::quantum\+::notation\+::operator\char`\"{}\char`\"{}\+\_\+cap (\begin{DoxyParamCaption}\item[{char const $\ast$}]{name,  }\item[{std\+::size\+\_\+t}]{ }\end{DoxyParamCaption})}

Literal for specifying the capture of a llvm\+::\+Value$\ast$. This literal calls the IOperand\+Prototype\+::enable\+Capture through the assignment of a IOperand\+Prototype\+Ptr to the class \mbox{\hyperlink{classmicrosoft_1_1quantum_1_1notation_1_1_capture}{Capture}}.

As an example, one may want to match the pattern {\ttfamily foo(bar(baz(x)), y)} and extract the variable {\ttfamily x} to add meta data to it. The corresponding IR could look like\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{\%1 = \mbox{\hyperlink{group__shorthand_notation_gabb463c16465034b9d9b85290edd9a4bc}{call}} \%Type* @baz(\%Type* \%0)}
\DoxyCodeLine{\%2 = \mbox{\hyperlink{group__shorthand_notation_gabb463c16465034b9d9b85290edd9a4bc}{call}} \%Type* @bar(\%Type* \%1)}
\DoxyCodeLine{\mbox{\hyperlink{group__shorthand_notation_gabb463c16465034b9d9b85290edd9a4bc}{call}} \textcolor{keywordtype}{void} @foo(\%Type* \%2, \%Type* \%3)}

\end{DoxyCode}
 To match this pattern, one would create the pattern {\ttfamily call(\char`\"{}foo\char`\"{}, call(\char`\"{}bar\char`\"{}, call(\char`\"{}baz\char`\"{}, \char`\"{}x\char`\"{}\+\_\+cap = \+\_\+)), \+\_\+)}. This pattern would ensure that at the time where the replacer function is called, the value stored in {\ttfamily \%0} is captured under the name {\ttfamily x}. \mbox{\Hypertarget{group__shorthand_notation_ga2fb129cfb7135e02513ac0eea14b94bc}\label{group__shorthand_notation_ga2fb129cfb7135e02513ac0eea14b94bc}} 
\index{Shorthand Notation@{Shorthand Notation}!store@{store}}
\index{store@{store}!Shorthand Notation@{Shorthand Notation}}
\doxysubsubsection{\texorpdfstring{store()}{store()}}
{\footnotesize\ttfamily IOperand\+Prototype\+Ptr microsoft\+::quantum\+::notation\+::store (\begin{DoxyParamCaption}\item[{IOperand\+Prototype\+Ptr const \&}]{target,  }\item[{IOperand\+Prototype\+Ptr const \&}]{value }\end{DoxyParamCaption})}

Matches a store instruction with a target and a value. 
\begin{DoxyCode}{0}
\DoxyCodeLine{addRule(\{\mbox{\hyperlink{group__shorthand_notation_ga2fb129cfb7135e02513ac0eea14b94bc}{store}}(\textcolor{stringliteral}{"{}target"{}}\_cap = \_, \textcolor{stringliteral}{"{}value"{}}\_cap = \_), replaceConstExpr\});}

\end{DoxyCode}
 where we want to match all store instructions and do not really care about how the target or value came about. In this case, we may want to capture the values to, for instance, make assignment at compile time. 